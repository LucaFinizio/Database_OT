package com.example.ot.controller;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

import com.example.ot.dao.RegionsDao;
import com.example.ot.entity.Regions;
import com.google.gson.Gson;

@Controller
@RequestMapping("/regions")
public class RegionsController {
	
	private RegionsDao regionsRepo;
	
	@Autowired
	public RegionsController(RegionsDao regionsRepo) {
		this.regionsRepo = regionsRepo;
	}
	
	@GetMapping
	public String showAllRegions() {
		
		List<Regions> regions = new ArrayList<>();
		regionsRepo.findAll().forEach(i -> regions.add(i));
	
	    String regionsObject = new Gson().toJson(regions);
		
		/*JSONObject regionsObject = new JSONObject();
		
		for(Regions temp : regions) {
			for (Field field : regions.getClass().getDeclaredFields()) {
			    field.setAccessible(true);
			    String name = field.getName();
			    Object value=null;
				try 
				{
					value = field.get(regions);
				    regionsObject.put(name, value);
				} catch (IllegalArgumentException e) 
				{
					e.printStackTrace();
				} catch (IllegalAccessException e) 
				{
					e.printStackTrace();
				}
			}
		}*/
			
		return regionsObject;

	}
}